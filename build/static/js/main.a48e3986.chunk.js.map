{"version":3,"sources":["components/Messages.js","components/Chat.js","components/SiteIntro.js","components/CreateMessage.js","components/CanvasBackground.js","App.js","index.js"],"names":["Messages","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","notify","t","e","ctx","clientNesRef","getContext","data","ImageData","putImageData","getStyle","user","backgroundColor","overflowY","opacity","determineVisualContent","content","scroll","length","splitContent","split","react_default","a","createElement","ref","vidRef","onLoadedMetadata","scrollToBottomVideo","controls","autoplay","src","alt","console","loadROM","start","style","height","width","youtubeURL","replace","frameborder","allow","allowfullscreen","hoverOn","chatRef","hoverOff","scrollToBottom","scrollIntoView","behavior","block","Console","addObserver","assertThisInitialized","_this2","onMouseEnter","onMouseLeave","chatItems","message","Component","Chat","chatMessages","map","components_Messages","key","id","SiteIntro","overlay","overlayRef","display","window","adsbygoogle","push","google_ad_client","enable_page_level_ads","href","onClick","className","data-ad-client","data-ad-slot","CreateMessage","state","onChange","setState","target","value","onSubmit","preventDefault","createMessage","position","bottom","type","name","flex","padding","placeholder","CanvasBackground","lineGradient","x","y","xEnd","yEnd","color1","color2","gradient","createLinearGradient","addColorStop","radialGradient","rad","radEnd","createRadialGradient","rand","end","Math","ceil","random","canvasSize","canvasRef","fill","col_hex","fillcolor","stroke","strokecolor","border","int_pix","strokesize","rect","sizeX","sizeY","fillStyle","strokeStyle","lineWidth","beginPath","closePath","circle","radius","arc","PI","point","strokeSize","canvasBackgroundFill","stars","min","i","sun","water","onResize","innerWidth","innerHeight","createCanvasBackground","addEventListener","openpgp","path","localStorage","publicKey","privateKey","pass","cryptoArray","Uint32Array","crypto","getRandomValues","toString","options","userIds","email","numBits","passphrase","then","setItem","privateKeyArmored","publicKeyArmored","App","socketConnection","stream","socket","socketIOClient","connect","concat","toConsumableArray","on","createPeer","initiator","log","peer","emit","signal","initiaitorSocketId","socketid","submitButton","next","destroy","peerInfo","inConvo","navigator","mediaDevices","getUserMedia","video","audio","Peer","trickle","send","JSON","stringify","isPublicKey","peerPublicKey","_ref","asyncToGenerator","regenerator_default","mark","_callee","privKey","_options","wrap","_context","prev","parse","readArmored","sent","keys","decrypt","t0","t1","privateKeys","plaintext","newMessage","stop","_x","apply","arguments","peerStream","peerRef","srcObject","onloaddedmetadata","play","_ref2","_callee2","_context2","fromText","publicKeys","ciphertext","_x2","_x3","clientRef","forceUpdate","_this3","components_SiteIntro","muted","class","components_Chat","submit","findUsers","components_CreateMessage","components_CanvasBackground","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.a48e3986.chunk.js","sourcesContent":["//Test files\r\n//https://files.catbox.moe/v71b50.jpg\r\n//https://files.catbox.moe/d0sb20.mp4\r\n\r\nimport React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport $ from 'jquery';\r\nimport { Console } from \"nes-emulator\";\r\n\r\nclass Messages extends Component {\r\n  \r\n    constructor(props) {\r\n        super(props)\r\n        this.console = new Console();\r\n                // Will notify `this.notify` upon events\r\n                this.console.addObserver( this );\r\n    }\r\n\r\n    notify = (t, e) => {\r\n        switch(t) {\r\n            case 'frame-ready' : {\r\n                var ctx = this.clientNesRef.getContext(\"2d\");\r\n                var data = new ImageData(e);\r\n                ctx.putImageData(data, 0, 0);\r\n            }\r\n        }\r\n    }\r\n\r\n    getStyle = (user) => {\r\n        if( user === \"You\" ) {\r\n            return {backgroundColor : '#FFDAB9', overflowY: \"auto\", opacity: .75 }\r\n\r\n        } else {\r\n                return {backgroundColor : \"#FFD700\", overflowY: \"auto\", opacity: .75 }\r\n            }\r\n        }\r\n    \r\n    determineVisualContent = (content, scroll) => {\r\n        if(typeof content == 'undefined' || typeof content == null) {\r\n            return null;\r\n        } else if (content.length <= 0) {\r\n            return null;\r\n        }\r\n        var splitContent = content.split('/');\r\n        if(splitContent[2] === \"files.catbox.moe\" || splitContent[2] === \"i.imgur.com\") {\r\n            splitContent = splitContent[3].split(\".\");\r\n            if(splitContent[1] == \"mp4\" || splitContent[1] == \"webm\" || splitContent[1] == \"avi\" || splitContent[1] == \"ogg\" || splitContent[1] == \"mpeg\") { \r\n                //ref = {vidRef => {this.vidRef = vidRef }}\r\n                return (\r\n                <div ><br /><video ref = {vidRef => {this.vidRef = vidRef }} onLoadedMetadata = {this.scrollToBottomVideo} controls autoplay> <source src={content} ></source></video> </div>\r\n                )\r\n            } else if(splitContent[1] == \"jpg\" || splitContent[1] == \"jpeg\" || splitContent[1] == \"png\" || splitContent[1] == \"gif\")  {\r\n                return <div ><br /><img src = {content} alt=\"User Content\" /></div>\r\n            } else if (splitContent[1] == \"nes\") {\r\n                this.console.loadROM(content);\r\n                this.console.start();\r\n\r\n                return (\r\n                    <div>\r\n                        <canvas ref = {clientNesRef => {this.clientNesRef = clientNesRef }} style = {{height: 300, width: 400}}> </canvas>\r\n                    </div>\r\n                )\r\n                \r\n            } else {\r\n                return null\r\n            }\r\n        } else if((splitContent[2] === \"www.youtube.com\" || splitContent[2] === \"youtube.com\" || splitContent[2] === \"youtu.be\" || splitContent[2] === \"www.youtu.be\")) {            \r\n            const regexp = /^.*(watch\\?v=)/;\r\n            \r\n            var youtubeURL = \"https://youtube.com/embed/\" + splitContent[3].replace(regexp, '');\r\n            return (\r\n                \r\n                <div><iframe width=\"560\" height=\"315\" src={youtubeURL} frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe></div>\r\n            )\r\n        } else {\r\n            return null\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.scrollToBottom();\r\n        //this.scrollToBottomVideo();\r\n      }\r\n    \r\n    componentDidUpdate() {\r\n        this.scrollToBottom();\r\n        //this.scrollToBottomVideo();\r\n      }\r\n\r\n      hoverOn = () => {\r\n          //this.setState({opacity: 1});\r\n          this.chatRef.style.opacity = 1; // this.state.opacity;\r\n      }\r\n\r\n      hoverOff = () => {\r\n          //this.setState({opacity: .75});\r\n          this.chatRef.style.opacity = .75; // this.state.opacity;\r\n      }\r\n\r\n    scrollToBottom = () =>  \r\n        {  \r\n            this.chatRef.scrollIntoView({behavior: 'smooth', block: \"start\"}); \r\n        }\r\n    scrollToBottomVideo = () => \r\n    {\r\n        this.vidRef.scrollIntoView({behavior: 'smooth', block: \"start\"})\r\n    }\r\n\r\n  render() {    \r\n    return (\r\n        <div onMouseEnter = {this.hoverOn} onMouseLeave = {this.hoverOff} style = {this.getStyle(this.props.chatItems.user)} ref = {chatRef => {this.chatRef = chatRef }}> \r\n            {this.props.chatItems.user + \": \" + this.props.chatItems.message}\r\n            {this.determineVisualContent(this.props.chatItems.message)}\r\n        </div>\r\n        \r\n    )\r\n  };\r\n}\r\n\r\nMessages.propTypes = {\r\n    chatItems: PropTypes.object.isRequired,\r\n}\r\n\r\n\r\nexport default Messages;\r\n","import React, { Component } from 'react';\r\nimport Messages from './Messages';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass Chat extends Component {\r\n\r\n\r\n  render() {    \r\n   // console.log(this.props.chatMessages);\r\n    return (\r\n       // <showButton />\r\n        this.props.chatMessages.map(chatItems => (\r\n            <Messages key = {chatItems.id} chatItems = {chatItems}/>\r\n        \r\n     ))\r\n     \r\n    );\r\n  }\r\n}\r\n\r\nChat.propTypes = {\r\n    chatMessages: PropTypes.array.isRequired\r\n}\r\n\r\nexport default Chat;\r\n\r\n/*\r\n\r\n        <video controls autoplay>\r\n          <source src=\"https://files.catbox.moe/d0sb20.mp4\" type=\"video/mp4\"></source>\r\n        </video>\r\n\r\n*/","import React, { Component } from 'react';\r\n\r\nclass SiteIntro extends Component {\r\n\r\n  overlay  = () => {\r\n    this.overlayRef.style.display = 'none';\r\n  } \r\n\r\n  componentDidMount() {\r\n    (window.adsbygoogle = window.adsbygoogle || []).push({\r\n      google_ad_client: \"ca-pub-4945903400451091\",\r\n      enable_page_level_ads: true\r\n });\r\n  }\r\n\r\n  render() {    \r\n\r\n    return (\r\n            <div id = \"overlay\" ref = {overlayRef => {this.overlayRef = overlayRef}} >      \r\n                <p>Please check the <b>TOP RIGHT</b> (in Chrome) <b>TOP LEFT</b> (in Firefox) of your browser and make sure your webcam/mic is accessible to the browser!<br /></p>\r\n                <p>Welcome to Random.moe!</p>\r\n                <p>Random.moe is an <a href=\"https://github.com/openpgpjs/openpgpjs\">encrypted</a>, <a href=\"https://github.com/feross/simple-peer\">peer-to-peer</a>, <a href= \"https://github.com/paradoxmoe/paradox\">open source</a> random chat alternative to Omegle/Chatroulette/etc.</p>\r\n                <p>Special thanks to: <a href='http://stackoverflow.com/a/35387759'>Kecer</a> on Stackoverflow and <a href=\"https://codepen.io/Anomaly942/\">Kaustav</a> on CodePen</p>\r\n            \r\n                <p>Youtube Support! Just Copy and Paste a youtube URL into the chat!</p>\r\n                <p>Imgur support! </p>\r\n                <p><a href=\"http://catbox.moe\">Catbox</a> Support! Just Copy and Paste a Catbox.moe URL into the chat! (Images and videos!) </p>\r\n                <p>As the site is currently in Early Access, please report bugs or other issues <a href= \"https://github.com/paradoxmoe/RandomMOE/issues\">here</a>!</p>\r\n                <p>Furthermore, as you are talking to random and anonymous users, please exercise caution when using this platform.</p>\r\n                <p>We use cookies/local storage to store your PGP encryption keys, so be aware of this.</p>\r\n\r\n                <p>If you'd like to contribute to the success of random.moe, please visit our <a href=\"https://www.patreon.com/randomMOE\">Patreon</a>!</p>\r\n                <button onClick={this.overlay}>Click here if you've read the above!</button>\r\n\r\n                <ins className=\"adsbygoogle\"\r\n                  style={{display: 'block', width: '970px', height: '250px'}}\r\n                  data-ad-client=\"ca-pub-4945903400451091\"\r\n                  data-ad-slot=\"3171544049\">\r\n                 </ins>\r\n\r\n            </div>\r\n    )\r\n  };\r\n}\r\n\r\n\r\n\r\nexport default SiteIntro;","import React, { Component } from 'react';\r\n\r\nclass CreateMessage extends Component {\r\n\r\n    state = {\r\n        content: ''\r\n    }\r\n\r\n    onChange = (e) => this.setState({content: e.target.value}); \r\n    onSubmit = (e) => {\r\n        e.preventDefault();\r\n        this.props.createMessage(\"You\", this.state.content);\r\n        this.setState({content: '', user: 'You' })\r\n    }\r\n  render() {    \r\n\r\n    return (\r\n            <form onSubmit = {this.onSubmit} style = {{position: 'fixed', bottom: '0', width: '100%' }}>\r\n                <input type=\"text\" name=\"title\" style={{flex: '10', padding: '5px', width: '90%'}} placeholder=\"Type Message Here...\" value={this.state.content} onChange={this.onChange}></input>\r\n                <input type=\"submit\" value=\"submit\" className = \"btn\" style={{flex: '1'}} />\r\n            </form>\r\n    )\r\n  };\r\n}\r\n\r\n\r\n\r\nexport default CreateMessage;\r\n","//https://codepen.io/Anomaly942/pen/pOqRrz?editors=0010\r\n//https://codepen.io/kevincardona1/pen/LWwZyx\r\n\r\nimport React, { Component } from 'react';\r\nimport { brotliDecompress } from 'zlib';\r\n\r\nclass CanvasBackground extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        \r\n        this.fillcolor = \"#000000\";\r\n        this.strokecolor = \"#000000\";\r\n        this.strokesize = \"#000000\";\r\n        \r\n        this.state = {width: window.innerWidth, height: window.innerHeight};      \r\n    }\r\n\r\n    componentWillMount() {\r\n      //this.onResize();\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.ctx = this.canvasRef.getContext('2d');\r\n        this.setState({width: window.innerWidth, height: window.innerHeight});    \r\n        window.addEventListener('resize', this.onResize);\r\n        this.onResize();\r\n        this.createCanvasBackground();\r\n      }\r\n    \r\n      componentDidUpdate() {\r\n        this.createCanvasBackground();\r\n      }\r\n\r\n    lineGradient = (x, y, xEnd, yEnd, color1, color2) => {\r\n        let gradient = this.ctx.createLinearGradient(x, y, xEnd, yEnd);\r\n        gradient.addColorStop(0, color1);\r\n        gradient.addColorStop(1, color2);\r\n        return gradient;\r\n    }\r\n\r\n    radialGradient = (x, y, rad, xEnd, yEnd, radEnd, color1, color2) => {\r\n      let gradient = this.ctx.createRadialGradient(x, y, rad, xEnd, yEnd, radEnd, color1, color2);\r\n      gradient.addColorStop(0, color1);\r\n      gradient.addColorStop(1, color2);\r\n      return gradient;\r\n    }\r\n\r\n    rand = (start, end) => {\r\n      return Math.ceil(Math.random() * (end - start) + start);\r\n    }\r\n\r\n    canvasSize = () => {\r\n        this.canvasRef.width = this.state.width;\r\n        this.canvasRef.height = this.state.height;\r\n        //this.setState({canvasRef: this.canvasRef});\r\n    }\r\n\r\n    fill = (col_hex) => {\r\n        this.fillcolor = col_hex;\r\n    }\r\n\r\n    stroke = (col_hex) => {\r\n      this.strokecolor = col_hex;\r\n    }\r\n\r\n    border = (int_pix) => {\r\n      this.strokesize = int_pix;\r\n    }\r\n\r\n    rect = (x, y, sizeX, sizeY) => {\r\n        this.ctx.fillStyle = this.fillcolor;\r\n        this.ctx.strokeStyle = this.strokecolor;\r\n        this.ctx.lineWidth = this.strokesize;\r\n        this.ctx.beginPath();\r\n        this.ctx.rect(x, y, sizeX, sizeY);\r\n        this.ctx.fill();\r\n        this.ctx.stroke();\r\n        this.ctx.closePath();\r\n\r\n        //this.setState({ctx: this.ctx}); \r\n    }\r\n\r\n    circle = (x, y, radius) => {\r\n      this.ctx.fillStyle = this.fillcolor;\r\n      this.ctx.strokeStyle = this.strokecolor;\r\n      this.ctx.lineWidth = this.strokesize;\r\n\r\n      this.ctx.beginPath();\r\n      this.ctx.arc(x, y, radius, 0, Math.PI*2, false);\r\n      this.ctx.fill();\r\n      this.ctx.stroke();\r\n      this.ctx.closePath();\r\n\r\n    }\r\n\r\n    point = (x, y) => {\r\n      this.ctx.fillStyle = this.fillcolor;\r\n      this.ctx.strokeStyle = this.strokecolor;\r\n      this.ctx.lineWidth = this.strokeSize;\r\n\r\n      this.ctx.beginPath();\r\n      this.ctx.rect(x, y, 1, 1);\r\n      this.ctx.fill();\r\n      this.ctx.stroke();\r\n      this.ctx.closePath();\r\n    }\r\n\r\n    \r\n    canvasBackgroundFill = () => {\r\n        this.fill(this.lineGradient(this.state.width/1, 0, this.state.width/2, this.state.height * 1.3, \"#200030\", '#9c046e'));\r\n        this.rect(0, 0, this.state.width, this.state.height);\r\n    }\r\n    \r\n    stars = () => {\r\n      this.stroke(\"#ffffff\");\r\n      this.border(Math.min((this.state.width / 1440), (this.state.height / 900)) * 1.5);\r\n      for(let i = 0; i < (this.state.width / 1.5); i++) {\r\n        this.point(this.rand(0, this.state.width), this.rand(0, this.state.width));\r\n      }\r\n      this.stroke(\"#ffffff00\");\r\n    }\r\n\r\n    sun = () => {\r\n      var radius = Math.min((this.state.width/1440), (this.state.height/900)) * 400;\r\n      this.fill(this.lineGradient(this.state.width/2,0,this.state.width/2,this.state.height*1.1, \"#ff4400\", \"#ffff00\"));\r\n      this.circle(this.state.width/2, this.state.height/2, radius);\r\n    }\r\n\r\n    water = () => {\r\n      this.fill(this.radialGradient((this.state.width / 2), (this.state.height * (2/3)), ((this.state.width / 1440)*100), (this.state.width / 2), (this.state.height * (2/3)), ((this.state.height / 900) * 600), \"#002244cc\", \"#000044cc\")); \r\n      this.rect(0, this.state.height*(2/3), this.state.width, this.state.height / 3);\r\n    }\r\n\r\n    onResize = () => {\r\n        this.setState({width: window.innerWidth, height: window.innerHeight});\r\n        this.canvasSize();\r\n        this.createCanvasBackground();\r\n    }\r\n\r\n    createCanvasBackground = () => {\r\n      this.canvasBackgroundFill();\r\n      this.stars();\r\n      this.sun();\r\n      this.water();\r\n\r\n\r\n        //ctx.font = \"30px Arial\";\r\n        //ctx.strokeText(\"Hello CanvasBackground\", 10, 50);\r\n          //var width = window.innerWidth;\r\n          //var height = window.innerHeight;\r\n    \r\n    \r\n    }\r\n\r\n  render() {    \r\n \r\n    return (\r\n        <canvas ref= {canvasRef => {this.canvasRef = canvasRef}}>\r\n\r\n        </canvas>\r\n    )\r\n  }\r\n}\r\n\r\nexport default CanvasBackground;","//npm run build\r\n\r\nimport React, { Component } from 'react';\r\nimport Chat from './components/Chat';\r\nimport SiteIntro from './components/SiteIntro';\r\nimport CreateMessage from './components/CreateMessage';\r\nimport CanvasBackground from './components/CanvasBackground';\r\nimport * as openpgp from 'openpgp';\r\nimport './App.css';\r\nimport Peer from 'simple-peer'; \r\nimport socketIOClient from 'socket.io-client';\r\n//import data from 'emoji-mart/data/messenger.json'\r\n//import { NimblePicker } from 'emoji-mart'\r\n//import $ from 'jquery';\r\n\r\n\r\nopenpgp.initWorker({path: './dist/openpgp.worker.min.js'}); \r\n\r\nif(typeof localStorage.publicKey == 'undefined' || typeof localStorage.privateKey == 'undefined' || typeof localStorage.pass == 'undefined') {\r\n\r\n  var cryptoArray = new Uint32Array(4);\r\n  window.crypto.getRandomValues(cryptoArray);\r\n  localStorage.pass = cryptoArray[2].toString()\r\n  var options = {\r\n    userIds: [{name: cryptoArray[3].toString(), email: cryptoArray[0] + '@' + cryptoArray[1] + '.com' }],\r\n    numBits: 2048,\r\n    passphrase: localStorage.pass\r\n  }\r\n\r\n  openpgp.generateKey(options).then(function(key) {\r\n  localStorage.setItem('privateKey', key.privateKeyArmored);\r\n  localStorage.setItem('publicKey', key.publicKeyArmored);\r\n\r\n  })\r\n}\r\n\r\nclass App extends Component {\r\n  \r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      chatMessages: [ \r\n      ],\r\n      peerInfo: null,\r\n      stream: null,\r\n      peer: null,\r\n      inConvo: false,\r\n    }\r\n    \r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n    navigator.mediaDevices.getUserMedia({video:true, audio: true}).then(stream => {\r\n      this.clientRef.srcObject = stream;\r\n      this.clientRef.onloaddedmetadata = this.clientRef.play();\r\n      this.forceUpdate();\r\n    })\r\n  }\r\n\r\n  socketConnection = (stream) => {\r\n    var socket = socketIOClient.connect(\"https://random.moe\");   \r\n    this.setState({chatMessages: [...this.state.chatMessages, {id: this.state.chatMessages.length, user: \"Client\", message:\"Connecting to Server...\"}]})\r\n    socket.on('peer', (data) => {\r\n      this.createPeer(data.initiator, stream);\r\n      \r\n      console.log(\"Server told client to become initiator: \" + data.initiator);\r\n      if(data.initiator) {\r\n        this.state.peer.on(\"signal\", (data) => {\r\n          socket.emit(\"initiatorData\", data);\r\n          this.setState({chatMessages: [...this.state.chatMessages, {id: this.state.chatMessages.length, user: \"Client\", message:\"Emitting Initiator data to Server...\"}]})\r\n        })\r\n      }\r\n    });\r\n\r\n      socket.on('joinInitiator', (data) => {\r\n        this.setState({chatMessages: [...this.state.chatMessages, {id: this.state.chatMessages.length, user: \"Client\", message:\"Joining Initiator...\"}]})\r\n        this.state.peer.signal(data.data);\r\n        \r\n        if(!data.initiator) {\r\n          var initiaitorSocketId = data.socketid;\r\n          this.state.peer.on('signal', (data) => {\r\n            socket.emit(\"backToInitiator\", {socketid: initiaitorSocketId, data: data});\r\n            this.setState({chatMessages: [...this.state.chatMessages, {id: this.state.chatMessages.length, user: \"Client\", message:\"Recieving Initiator's Data...\"}]})\r\n          })\r\n        }\r\n      })\r\n\r\n      socket.on('toInitiatorFromServer', (data) => {\r\n        this.state.peer.signal(data.data);\r\n\r\n        this.setState({chatMessages: [...this.state.chatMessages, {id: this.state.chatMessages.length, user: \"Client\", message:\"Connecting to Peer...\"}]})\r\n      })\r\n    \r\n  }\r\n\r\n  submitButton = () => {\r\n    console.log(\"Can Submit\")\r\n  }\r\n\r\n  next = () => {\r\n    this.setState({chatMessages: [...this.state.chatMessages, {id: this.state.chatMessages.length, user: \"Client\", message:\"Finding User...\"}]})\r\n    if(this.state.peer != null && typeof this.state.peer != 'undefined') {\r\n        this.state.peer.destroy();\r\n        this.setState({\r\n          chatMessages: [ \r\n          ],\r\n          peerInfo: null,\r\n          stream: null,\r\n          peer: null,\r\n          inConvo: false,\r\n        });\r\n      }\r\n          navigator.mediaDevices.getUserMedia({video:true, audio: true}).then(stream => {\r\n            this.socketConnection(stream);\r\n          })\r\n  }\r\n\r\n  //Needs to be finished\r\n  createPeer = (initiator, stream) => {\r\n  var peer = new Peer({initiator: initiator, trickle: false, stream: stream});\r\n\r\n  this.setState({inConvo: true});\r\n  \r\n    peer.on(\"connect\", () => {\r\n        peer.send(JSON.stringify({isPublicKey: true, peerPublicKey: localStorage.publicKey}))\r\n        this.setState({chatMessages: []});\r\n    })\r\n\r\n    peer.on(\"data\", async (data) => {\r\n      data = JSON.parse(data);\r\n\r\n      if(data.isPublicKey === true) {\r\n        localStorage.setItem(\"peerPublicKey\", data.peerPublicKey);\r\n        console.log(\"Public Key Recieved!\");\r\n        this.setState({chatMessages: [{id: this.state.chatMessages.length, user: \"Client\", message:\"You can now send messages!\"}]});\r\n\r\n      } else {\r\n\r\n        let privKey = ( await openpgp.key.readArmored(localStorage.privateKey)).keys[0];\r\n        await privKey.decrypt(localStorage.pass);\r\n\r\n        let options = {\r\n          message: await openpgp.message.readArmored(data.data),\r\n          privateKeys: [privKey]\r\n        }\r\n\r\n        openpgp.decrypt(options).then( (plaintext) => {\r\n          let newMessage = {\r\n            id: this.state.chatMessages.length,\r\n            user: data.user,\r\n            message: plaintext.data \r\n          }\r\n\r\n          this.setState({chatMessages: [...this.state.chatMessages, newMessage]});\r\n        })\r\n\r\n\r\n      }\r\n\r\n\r\n    });\r\n\r\n    peer.on(\"stream\", (data) => {\r\n      this.setState({peerStream: data});\r\n      this.peerRef.srcObject = this.state.peerStream;\r\n      this.peerRef.onloaddedmetadata = this.peerRef.play();\r\n    });\r\n\r\n    this.setState({peer: peer, inConvo: true});\r\n    return peer;\r\n  }\r\n\r\n\r\n  createMessage = async (user, content) => {\r\n\r\n      const newMessage = {\r\n        id: this.state.chatMessages.length,\r\n        user: user,\r\n        message: content \r\n      }\r\n\r\n      this.setState({chatMessages: [...this.state.chatMessages, newMessage]});\r\n      let data = openpgp.message.fromText(content);\r\n\r\n      let options = {\r\n        message: data,\r\n        publicKeys: ( await openpgp.key.readArmored(localStorage.peerPublicKey)).keys,\r\n      }\r\n\r\n      openpgp.encrypt(options).then( (ciphertext) => {\r\n        let data = ciphertext.data;\r\n        this.state.peer.send(JSON.stringify({user: 'Anon', data: data}));\r\n      });\r\n\r\n      \r\n     \r\n  }\r\n\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"App\"> \r\n      <SiteIntro />\r\n\r\n      <div id = \"videoChat\">\r\n        <div><h3 id = \"logo\">Random.moe</h3> <a href=\"https://www.patreon.com/randomMOE\">Patreon</a> | <a href=\"https://twitter.com/Twitch_NotDem\">Twitter</a> | <a href=\"https://twitch.tv/notdem\">Twitch</a> | <a href=\"https://github.com/paradoxmoe/RandomMOE\">Github</a></div>\r\n        <video ref = {clientRef => {this.clientRef = clientRef}} controls muted></video>\r\n        <video ref = {peerRef => {this.peerRef = peerRef}} controls></video>\r\n      </div>\r\n        <div id = \"chatApp\" class = \"disableScrollbars\">\r\n          <Chat chatMessages = {this.state.chatMessages} submit = {this.submitButton} />\r\n          <button type=\"button\" onClick = {this.next} ref = {findUsers => {this.findUsers = findUsers}}>Next</button>\r\n        </div>\r\n        {/* <NimblePicker set='messenger' data={data} /> */}\r\n        <CreateMessage createMessage =  {this.createMessage} peer = {this.peer} />\r\n        <CanvasBackground />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n//import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n"],"sourceRoot":""}